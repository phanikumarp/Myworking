 <!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="text/javascript"
	src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.16/angular.js"></script>
<link rel="stylesheet" href="css/bootstrap.css">

<link rel="stylesheet" href="css/main.css">
<link rel="stylesheet" href="css/bootstrap.min.css">

<link rel="stylesheet"
	href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script
	src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src="js/n42App.js">
</script>
</head>

<body class="container">
	<div class="container" ng-app="myApp" ng-controller="myCtrl">
		<div class="panel-heading">
			<div class="row">
				<div class="col-sm-2">
					<h3>Canary Score</h3>
				</div>
				<div class="col-sm-1">
					<h3>:</h3>
				</div>
				<div class="col-sm-1">
					<h3>{{canaryData.canary_output.canaryFinalScore}}</h3>
				</div>
				<div class="col-sm-2"
					ng-if="canaryData.canary_output.canaryFinalColor =='green'"
					style="color: white;">
					<h3>
						<button class="btn btn-sm btn-success">PASS</button>
					</h3>
				</div>
				<div class="col-sm-2"
					ng-if="canaryData.canary_output.canaryFinalColor =='red'"
					style="color: white;">
					<h3>
						<button type="button" class="btn btn-sm btn-danger">HIGH</button>
					</h3>
				</div>
				<div class="col-sm-2"
					ng-if="canaryData.canary_output.canaryFinalColor =='orange'"
					style="color: white;">
					<h3>
						<button type="button" class="btn btn-sm btn-warning">WARNING</button>
					</h3>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-2">
					<strong>Canary Name</strong>
				</div>
				<div class="col-sm-1">:</div>
				<div class="col-sm-2">{{canaryData.canary_output.name}}</div>
			</div>
			<div class="row">
				<div class="col-sm-2">
					<strong>Canary Id</strong>
				</div>
				<div class="col-sm-1">:</div>
				<div class="col-sm-2">{{canaryData.canary_output.canaryId}}</div>
			</div>

			<div class="row">
				<div class="col-sm-2">
					<strong>Launched Date</strong>
				</div>
				<div class="col-sm-1">:</div>
				<div class="col-sm-3">{{canaryData.canary_output.launchedDate}}</div>
			</div>

			<div class="row">
				<div class="col-sm-2">
					<strong>End Date</strong>
				</div>
				<div class="col-sm-1">:</div>
				<div class="col-sm-3">{{canaryData.canary_output.endDate}}</div>
			</div>

			<div class="row">
				<div class="col-sm-2">
					<strong>Duration</strong>
				</div>
				<div class="col-sm-1">:</div>
				<div class="col-sm-2">{{canaryData.canary_output.duration}}</div>
			</div>

			<div class="row">
				<div class="col-sm-2">
					<strong>Health Message</strong>
				</div>
				<div class="col-sm-1">:</div>
				<div class="col-sm-2">{{canaryData.canary_output.healthMessage}}</div>
			</div>

			<div class="row">
				<div class="col-sm-2">
					<strong>Health</strong>
				</div>
				<div class="col-sm-1">:</div>
				<div class="col-sm-2">{{canaryData.canary_output.health}}</div>
			</div>

			<div class="row">
				<div class="col-sm-2">
					<strong>Status</strong>
				</div>
				<div class="col-sm-1">:</div>
				<div class="col-sm-2">{{canaryData.canary_output.status}}</div>
			</div>
		</div>

		<div class="panel-body">
			<h3>Metric Analysis</h3>
			<div class="col-xs-8">
				<div class="row">
					<div class="col-xs-1">Filter:</div>
					<div class="col-md-2">
						<input class="form-control" type="text" ng-model="search" />
					</div>
				</div>
				<table class="table table-hover" style="border-collapse: collapse;">
					<thead>
						<tr>
							<th>Group Name</th>
							<th>Metrics</th>
							<th>Deviation</th>
							<th>Score</th>
							<th>Health Status</th>
						</tr>
					</thead>
					<tbody>
						<tr data-toggle="collapse" data-target="#{{$index}}"
							class="accordion"
							ng-repeat="canary in canaryData.canary_output.results | filter:search">
							<td><button class="btn btn-default btn-xs">
									<span class="glyphicon glyphicon-chevron-down"></span>
								</button> {{canary.name}} <span class="hiddenRow">

									<div class="collapse" id="{{$index}}">
										<table class="table table-hover">
											<thead>
												<tr>
													<th>Metric Name</th>
													<th>Score</th>
													<th>Error</th>
													<th></th>
												</tr>
											</thead>

											<tbody>
												<tr class="table-hover"
													ng-repeat="metrics in canary.metricList track by $index  | filter:search">
													<td data-toggle="collapse"><span ng-model="metrics"
														ng-click="getMetric(metrics)">{{metrics.metricName}}</span></td>
													<td>{{metrics.metricScore}}</td>
													<td>{{metrics.metricError}}</td>
												</tr>
											</tbody>
										</table>
									</div>
							</span></td>
							<td><span ng-repeat="metrics in canary.metricList"
								ng-init="count = $index" ng-show="$last"> {{$index+1}} </span></td>
							<td></td>
							<td>{{canary.groupScore}}</td>
							<td ng-if="canary.groupColor =='green'" style="color: white;"><button
									type="button" class="btn btn-xs btn-success">PASS</button></td>
							<td ng-if="canary.groupColor =='red'" style="color: white;"><button
									type="button" class="btn btn-xs btn-danger">HIGH</button></td>
							<td ng-if="canary.groupColor =='orange'" style="color: white;"><button
									type="button" class="btn btn-xs btn-warning">WARNING</button></td>

						</tr>
					</tbody>
				</table>

				<div>
					<table ng-show="version" class="table table-striped table-bordered">
						<thead>
							<tr data-toggle="collapse">
								<th>Versions</th>
								<th>Median</th>
								<th>First Quantile</th>
								<th>Mean</th>
								<th>Third Quantile</th>
								<th>Min</th>
								<th>Max</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="values in metricData.stats track by $index">
								<td>version{{$index+1}}</td>
								<td>{{values.Median}}</td>
								<td>{{values.1stQuantile}}</td>
								<td>{{values.Mean}}</td>
								<td>{{values.3rdQuantile}}</td>
								<td>{{values.Min}}</td>
								<td>{{values.Max}}</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
</body>
</html>